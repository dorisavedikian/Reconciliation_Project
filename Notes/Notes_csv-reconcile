###### csv-reconcile
# https://github.com/gitonthescene/csv-reconcile
# Note: files need to be *.tsv files  # Go here: Reconciliation Project/Python scripts/CSV_2_TSV.pyv

# Installation directions:
# 1. Clone the repository, cd into repo and do everything from the repo directory
# 2. Create virtual environment, install csv-reconcile and initialize database
python3 -m venv .venv                                         
.venv/bin/pip install csv-reconcile                            
source .venv/bin/activate                                            
csv-reconcile init nalt_labels_data/nalt_preflabels_only.tsv NALT_URI Label
csv-reconcile serve 
csv-reconcile init nalt_labels_data/nalt_altlabels_only_withsuffix.tsv NALT_URI_Numbered Label
csv-reconcile serve
# Service: http://127.0.0.1:5000/reconcile  
# Start reconciling * Select 
# cell.recon.match.id
# cell.recon.best.score                                   
deactivate   
# So, nalt_preflabels_only.tsv worked because by nature of the SKOS model it has no duplicates...
# but, nalt_altlabels.tsv still has duplicate URI's

# So, I added a suffix to the duplicate URI's so I could do the reconciliation and it worked, I was able to reconcile the 
# beta prepared labels to all of the pref labels albeit, with some extra work pre and post reconciliation.....
# all together there are 5 pref labels in the Nalt that matched to 5 proposed labels in the beta prepared demo data

# Reconciling the nalt_preflabels_only.tsv to the beta prepared.tsv resulted in 739 labels that were reconciled to the NALT

# Based on the reconciliation reference I have for the beta prepared labels,...the expectation is that 748 terms would reconcile to the nalt
# The 4 terms that should be reconciling to the preflabels.tsv but arent are; 
# Breeding and Genetic Improvement
# New Zealand White rabbit 
# Limulus amebocyte lysate assay
# ames test








# side note:
# This worked - read somewhere that the architecture needed to be explicitly called out. 
python3 -m venv venv
ARCHFLAGS="-arch x86_64" venv/bin/pip install csv-reconcile
source venv/bin/activate




